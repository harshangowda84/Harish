# üß™ MANUAL DATE TESTING GUIDE FOR PASS EXPIRY

## üìç WHERE TO EDIT THE DATE

**File:** `backend/src/utils/dateOverride.ts` (Line ~13)

Open this file in VS Code and edit the `TEST_OVERRIDE_DATE` variable.

---

## üéØ TESTING SCENARIOS

### **SCENARIO 1: Test DAY PASS (24-hour expiry)**

**Step 1:** Open `backend/src/utils/dateOverride.ts`

**Step 2:** Find this section and uncomment Option 2:
```typescript
// ‚ùå Option 2: Test TOMORROW (Day pass expires, Weekly/Monthly valid)
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
```

Make sure the other options are commented out:
```typescript
const TEST_OVERRIDE_DATE: Date | null = null;  // ‚Üê Line 13 - Keep this commented

// ‚úÖ Option 1: Test TODAY (all passes valid)
// const TEST_OVERRIDE_DATE = new Date();

// ‚ùå Option 2: Test TOMORROW (Day pass expires, Weekly/Monthly valid)
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);  // ‚Üê UNCOMMENTED

// ‚ùå Option 3: Test 8 DAYS LATER (Day + Weekly expire, Monthly valid)
// const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 8 * 24 * 60 * 60 * 1000);
```

**Step 3:** Save the file (backend auto-restarts)

**Step 4:** Go to Conductor Panel and scan the card ‚Üí **You'll see: "‚ùå Pass has expired"**

---

### **SCENARIO 2: Test WEEKLY PASS (7-day expiry)**

**Step 1:** Open `backend/src/utils/dateOverride.ts`

**Step 2:** Uncomment Option 3:
```typescript
// ‚ùå Option 3: Test 8 DAYS LATER (Day + Weekly expire, Monthly valid)
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 8 * 24 * 60 * 60 * 1000);
```

**Step 3:** Save file ‚Üí Backend restarts

**Step 4:** Scan card in Conductor Panel ‚Üí **You'll see: "‚ùå Pass has expired"**

---

### **SCENARIO 3: Test MONTHLY PASS (30-day expiry)**

**Step 1:** Open `backend/src/utils/dateOverride.ts`

**Step 2:** Uncomment Option 4:
```typescript
// ‚ùå Option 4: Test 31 DAYS LATER (All 3 expire)
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 31 * 24 * 60 * 60 * 1000);
```

**Step 3:** Save file ‚Üí Backend restarts

**Step 4:** Scan card in Conductor Panel ‚Üí **You'll see: "‚ùå Pass has expired"**

---

### **SCENARIO 4: Test YEARLY PASS (365-day expiry)**

**Step 1:** Open `backend/src/utils/dateOverride.ts`

**Step 2:** Uncomment Option 5:
```typescript
// ‚úÖ Option 5: Test 365 DAYS LATER (Only yearly passes valid)
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 365 * 24 * 60 * 60 * 1000);
```

**Step 3:** Save file ‚Üí Backend restarts

**Step 4:** Scan card in Conductor Panel ‚Üí **You'll see: "‚úÖ Valid yearly pass"**

---

### **SCENARIO 5: Reset to NORMAL (Use actual date)**

**Step 1:** Open `backend/src/utils/dateOverride.ts`

**Step 2:** Comment out all options, keep line 13 as null:
```typescript
const TEST_OVERRIDE_DATE: Date | null = null;  // ‚Üê All passes show ACTUAL expiry

// ‚úÖ Option 1: Test TODAY (all passes valid)
// const TEST_OVERRIDE_DATE = new Date();

// ‚ùå Option 2: Test TOMORROW (Day pass expires, Weekly/Monthly valid)
// const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);

// ... (rest commented out)
```

**Step 3:** Save file ‚Üí Backend uses real system date

---

## üìä PASS VALIDITY CHART

| Pass Type | Duration | Scenario | Date Override | Expected Result |
|-----------|----------|----------|---|---|
| **DAY** | 24 hours | Tomorrow | Option 2 (+1 day) | ‚ùå Expired |
| **WEEKLY** | 7 days | 8 days later | Option 3 (+8 days) | ‚ùå Expired |
| **MONTHLY** | 30 days | 31 days later | Option 4 (+31 days) | ‚ùå Expired |
| **YEARLY** | 365 days | 365 days later | Option 5 (+365 days) | ‚úÖ Valid |
| **ANY** | - | Today | null | ‚úÖ Valid |

---

## üîÑ HOW TO USE

### Quick workflow:

1. **Register a passenger with DAY PASS**
   - Go to http://localhost:5173
   - Passenger Login ‚Üí Select "Day Pass" ‚Üí Register

2. **Admin approves it**
   - Admin Login ‚Üí Approve ‚Üí Tap card

3. **Set date to tomorrow**
   - Open `backend/src/utils/dateOverride.ts`
   - Uncomment Option 2
   - Save (backend auto-restarts)

4. **Test in Conductor Panel**
   - Go to app ‚Üí Conductor Panel
   - Scan the same card
   - See: "‚ùå Pass has expired"

5. **Reset to normal**
   - Comment out Option 2 again
   - Save
   - Backend back to real date

---

## üìã BACKEND LOG MESSAGES

When you save the file, watch the terminal for:

```
[INFO] 18:30:45 Restarting: D:\Project\Harish\backend\src\utils\dateOverride.ts has been modified
Backend running on http://localhost:4000
üß™ TEST MODE: Using date [Your Custom Date]
```

This confirms the date override is active!

---

## ‚ö° QUICK COPY-PASTE OPTIONS

**For DAY PASS test:**
```typescript
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
```

**For WEEKLY PASS test:**
```typescript
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 8 * 24 * 60 * 60 * 1000);
```

**For MONTHLY PASS test:**
```typescript
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 31 * 24 * 60 * 60 * 1000);
```

**For YEARLY PASS test:**
```typescript
const TEST_OVERRIDE_DATE = new Date(new Date().getTime() + 365 * 24 * 60 * 60 * 1000);
```

**To reset (remove override):**
```typescript
const TEST_OVERRIDE_DATE: Date | null = null;
```

---

## ‚úÖ TESTING CHECKLIST

- [ ] Create Day Pass with unique name
- [ ] Admin approves it (tap card)
- [ ] Set date to tomorrow (Option 2)
- [ ] Scan card ‚Üí Shows "expired"
- [ ] Reset date to normal
- [ ] Create Weekly Pass with unique name
- [ ] Admin approves it
- [ ] Set date to +8 days (Option 3)
- [ ] Scan card ‚Üí Shows "expired"
- [ ] Reset and repeat for Monthly Pass

---

**That's it! Edit the date in `dateOverride.ts`, save, and test! üéâ**
